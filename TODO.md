# TODO

- [ ] Create config system
  - [x] Create datastore in encrypted SQLite DB
  - [x] Allow user save / load keys
  - [ ] Allow user to save / load config
- [x] Create libp2p node, with bootstrap list
  - [x] Use all transports (tcp, websockets, etc)
  - [x] Use all discovery methods
  - [x] Use dht and identity services (in case bootstrap nodes are down / unreachable)
- [ ] Discovery other nodes in data network
  - [x] Discoverable through 'data-network' DHT key
  - [ ] Exchange EPMs for servers
    - [ ] Each EPM is placed in the data directory / public key subdirectory / file type, file name is the CID of the EPM
    - [ ] Once written, digitally sign it and create a PNM, stored in the same way, file name includes EPM CID
  - [ ] Have EPMs advertise services (need to modify for this)
  - [ ] Exchange peerID and encryption xpub (control vs comms)
  - [ ] Node discovery channel for "global" network
- [ ] PubSub
  - [ ] Multiaddr and ETH digital signature sent over channel using the Publish Notification Message (PNM)
  - [ ] PNM stored as proof of signature in storage adapter
- [ ] MetaData Node Functionality
  - [ ] Store in folder (SPACE_DATA_NETWORK_METADATA_FOLDER)
  - [ ] By Ethereum address in folder, and PNM concatenated flatbuffer by datatype
- [ ] Direct dial protocol
  - [ ] Protocol for getting raw messages, send a date range (other query parameters?)
  - [ ] Peer discovery based on xpub; send a request and receive a peer id xpub, find next PeerID
  - [ ] Key exchange based on xpub; send a request and receive a peer encryption xpub, find next encryption key
- [ ] User Interface
  - [ ] HTTP or libp2p access to node
  - [ ] Takes JSON or Flatbuffer input
  - [ ] Converts JSON to flatbuffer, returns flatbuffer if JSON input
  - [ ] Pick messages to store based on producer, message type, and limit
- [ ] Storage adapter
  - [ ] IPFS storage adapter using external IPFS node
  - [ ] Other storage adapters will accept messages using pubsub interface
  - [ ] Implement libp2p [MessageCache](https://github.com/ChainSafe/js-libp2p-gossipsub/blob/f255ae4907ea1eb64272b27534794d6b8be1321d/src/message-cache.ts#L26)
- [ ] Identity management
  - [ ] Use SpaceDataStandards.org EPM
  - [ ] Have 'publish to global' option, sent to IPFS
- [ ] Set up channels per provider
- [ ] Request management
  - [ ] Send a request for service (XXX)
  - [ ] Get a response with new channel name for service (XXX)
  - [ ] Have node (or node provider) sub to channel
  - [ ] Send Publish Notification Message or actual data message to channel
- [ ] Custom packaging
  - [ ] Cut custom executables with config for each customer, with xpub
- [ ] Versioning
  - [ ] Expanse-based!
  
## Marketing

- [ ] Realtime
- [ ] Encrypted / Secure
- [ ] Point to point security (isolated)
